(this["webpackJsonpbox-ui"]=this["webpackJsonpbox-ui"]||[]).push([[2],{1171:function(e,t,n){"use strict";var i,s=n(12),a=n(17),c=n(10),r=n(36),o=n(53),l=n(2),u=n.n(l),d=n(56),j=n(5),b=n(1),m=n(21),x=n(3),O=n(57),f=n(135),h=n(359),p=n(7),v=n(4),S=n(0),g=function(e){var t=function(t){var n=t.activeTableRowIndex,i=t.contextMenuItems,s=void 0===i?[]:i,a=t.handleOpenModal,l=t.modalsStateList,d=(t.onRowClick,t.handleSetActiveItemId),j=t.handleSetActiveTableRowIndex,m=t.viewingModalName,p=Object(o.a)(t,["activeTableRowIndex","contextMenuItems","handleOpenModal","modalsStateList","onRowClick","handleSetActiveItemId","handleSetActiveTableRowIndex","viewingModalName"]),v=u.a.useState(null),g=Object(r.a)(v,2),I=g[0],T=g[1],D=u.a.useState(!1),C=Object(r.a)(D,2),A=C[0],y=C[1],L=u.a.useCallback((function(){y(!1),j(null),d(null)}),[j,d]);u.a.useEffect((function(){var e=h.a.find((function(e){return l["is".concat(e.name)]}));T(e)}),[l]),u.a.useEffect((function(){I||L()}),[I,L]);var F=u.a.useCallback((function(){return a({name:m})}),[a,m]),M=u.a.useCallback((function(e,t){t.withConfirmation?a({name:x.G.CONFIRMATION,payload:{confirmationAction:t.action,confirmationTitle:t.confirmationTitle,confirmationText:t.confirmationText}}):t.action()}),[a]),N=u.a.useMemo((function(){var e={name:"Open",icon:x.z.EDIT,action:function(){return F()}};return m?[e].concat(Object(O.a)(s)):s}),[s,m,F]),R=u.a.useCallback((function(e,t){var n=t.original.lockedFlag,i=t.original.id,s=t.index+1,a=t.page?s-t.pageSize*t.page:s;return{onDoubleClick:function(){m&&(d(i,n),j(a),F())},onContextMenu:function(){N.length&&(d(i,n),j(a),y(!0))},className:n&&"is-gray"}}),[F,m,N,d,j]);return Object(S.jsxs)(u.a.Fragment,{children:[Object(S.jsx)(f.b,{id:"tableContextMenu",disable:!N.length,children:Object(S.jsx)(e,Object(c.a)({onRowClick:R,activeTableRowIndex:n},p))}),Object(S.jsx)(b.g,{menuId:"tableContextMenu",onClick:M,items:N,isHidden:I||!A,onHide:!I&&n?L:null})]})};t.displayName="WithEditTable(".concat(v.a.getDisplayName(e),")");return Object(s.c)((function(e){return{activeTableRowIndex:Object(p.activeTableRowIndexSelector)(e),modalsStateList:Object(p.modalsStateListSelector)(e)}}),(function(e){return Object(a.b)({handleOpenModal:p.openModal,handleSetActiveItemId:p.setActiveItemId,handleSetActiveTableRowIndex:p.setActiveTableRowIndex},e)}))(t)}(Object(b.Z)()((function(e){var t=e.onRowClick,n=e.activeTableRowIndex,i=Object(o.a)(e,["onRowClick","activeTableRowIndex"]);return Object(S.jsx)(b.O,Object(c.a)({getTrGroupProps:t,activeRowIndex:n},i))}))),I=n(351),T=n(6),D=n.n(T),C=n(8),A=n(18),y=n(600),L=n(11).d.div(i||(i=Object(A.a)(["\n  margin-bottom: 15px;\n  padding: 10px 15px 12px;\n  border: 1px solid ",";\n  border-radius: 2px;\n  background-color: ",";\n\n  .title {\n    font-size: 18px;\n    color: ",";\n    font-weight: bold;\n  }\n\n  ",";\n"])),(function(e){return e.theme.colors.lighterGray}),(function(e){return e.theme.colors.lighterGrayCell}),(function(e){var t=e.theme;return e.color||t.colors.darkGray}),(function(e){return e.isHidden&&"\n    display: none;\n  "})),F=function(e){return e&&Object.keys(e).filter((function(e){return!e.match(/dateFrom|dateTo|dateTimeFrom|dateTimeTo/gi)})).reduce((function(t,n){return t[n]=e[n],t}),{})},M=Object(y.a)({form:x.y.FILTER,destroyOnUnmount:!1,enableReinitialize:!0})((function(e){var t=e.FilterForm,n=e.filterAction,i=e.filterValues,s=e.handleSubmit,a=e.invalid,c=e.isAutoRefresh,r=e.isHidden,o=e.isLoading,l=e.location,d=e.setIsAccessibleFiltering,m=e.stopAutoRefresh,O=u.a.useMemo((function(){var e=v.g.getUserData();return e&&e.username}),[]),f=u.a.useMemo((function(){return i&&i.institutionId}),[i]),h=u.a.useMemo((function(){return i&&i.transactionId}),[i]),p=u.a.useMemo((function(){return i&&i.accountId}),[i]),g=u.a.useMemo((function(){return i&&i.customerId}),[i]),I=u.a.useMemo((function(){return i&&i.cardId}),[i]),T=u.a.useMemo((function(){return i&&i.productName}),[i]),A=u.a.useMemo((function(){return i&&i.accountAlias}),[i]),y=u.a.useMemo((function(){return i&&i.panAlias}),[i]),M=u.a.useMemo((function(){return i&&i.lastName}),[i]),N=u.a.useMemo((function(){return i&&Object.values(i).reduce((function(e,t){return t?++e:e}),0)}),[i]),R=u.a.useCallback((function(){switch(l.pathname){case"".concat(x.e).concat(x.fb.SYSTEM_PROPERTIES):case"".concat(x.e).concat(x.fb.USERS):case"".concat(x.e).concat(x.fb.SCHEDULER):return N>=0;case"".concat(x.e).concat(x.fb.API_CALLS):case"".concat(x.e).concat(x.fb.USERS_ACTIVITY):return N>1;case"".concat(x.e).concat(x.fb.ACCOUNTS):return f&&(p||A||M);case"".concat(x.e).concat(x.fb.CARDS):return f&&(p||I||g||y);case"".concat(x.e).concat(x.fb.STATEMENTS):return f&&(p||A||M);case"".concat(x.e).concat(x.fb.CUSTOMERS):return f&&(g||M);case"".concat(x.e).concat(x.fb.TRANSACTIONS):return f&&(h||T||g||p);default:return N>0}}),[f,p,g,I,h,A,y,M,T,N,l]),E=u.a.useMemo((function(){return a||!R()}),[R,a]);u.a.useEffect((function(){d(!E)}),[E,d]);var w=u.a.useCallback(s(function(){var e=Object(C.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:c&&m(),v.b.set("".concat(l.pathname,"-").concat(O),JSON.stringify(F(t)),{expires:x.j.MONTH});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),[s,n,c,m]);return Object(S.jsxs)(L,{isHidden:r,children:[Object(S.jsx)("div",{className:"title",children:"Filter"}),Object(S.jsxs)("form",{onSubmit:w,children:[Object(S.jsx)(j.Flex,{width:"960px",alignItems:"flex-end",flexWrap:"wrap",m:"0 -8px 5px",children:t}),Object(S.jsx)(b.a,{text:"Show",isLoading:o,disabled:E})]})]})})),N=Object(I.a)(x.y.FILTER),R=Object(s.c)((function(e){return{filterValues:N(e),isAutoRefresh:Object(p.isAutoRefreshSelector)(e)}}),(function(e){return Object(a.b)({stopAutoRefresh:p.stopAutoRefresh,setIsAccessibleFiltering:p.setIsAccessibleFiltering},e)}))(M),E=n(237),w=Object(m.b)(Object(d.g)((function(e){var t=e.title,n=e.data,i=e.columns,s=e.FilterForm,a=e.filterAction,l=e.openModal,d=e.newModalName,m=e.location,O=e.isAutoRefresh,f=e.stopAutoRefresh,h=e.resetUtils,p=e.AdditionalButton,I=e.initialFilterValues,T=(e.filterData,e.setIsOpenFilter),D=e.isOpenFilter,C=e.isDownloadButton,A=e.isSearchable,y=e.uiItems,L=e.isReadOnly,F=e.isLoading,M=e.setActivePagePermission,N=Object(o.a)(e,["title","data","columns","FilterForm","filterAction","openModal","newModalName","location","isAutoRefresh","stopAutoRefresh","resetUtils","AdditionalButton","initialFilterValues","filterData","setIsOpenFilter","isOpenFilter","isDownloadButton","isSearchable","uiItems","isReadOnly","isLoading","setActivePagePermission"]),w=u.a.useState(!1),P=Object(r.a)(w,2),U=P[0],H=P[1];u.a.useEffect((function(){var e=O&&setInterval((function(){return a()}),5e3);return function(){return clearInterval(e)}}),[O,a]);var k=u.a.useMemo((function(){return y.find((function(e){return"".concat(x.e).concat(e.id)==="".concat(m.pathname)}))}),[m,y]);u.a.useEffect((function(){var e=k&&k.permission;M(e)}),[M,y,m,k]),u.a.useEffect((function(){return function(){return h()}}),[h]);var B=u.a.useMemo((function(){return D?"Hide Filter":"Show Filter"}),[D]),W=u.a.useMemo((function(){return t.split(" ").join("_").toLowerCase()}),[t]),Q=u.a.useMemo((function(){return n&&n.length}),[n]),J=u.a.useMemo((function(){var e=v.g.getUserData(),t=e&&e.username,n=v.b.get("".concat(m.pathname,"-").concat(t));return Object(c.a)(Object(c.a)({},I),n?JSON.parse(n):{})}),[I,m]),_=u.a.useMemo((function(){return A&&n&&n.length>10}),[A,n]),z=u.a.useCallback((function(){return H(!U)}),[U]),q=u.a.useCallback((function(){return T(!D)}),[T,D]),V=u.a.useCallback((function(){return l({name:d})}),[l,d]);return Object(S.jsxs)(u.a.Fragment,{children:[Object(S.jsx)(E.a,{title:t,pageId:k&&k.id}),s&&Object(S.jsx)(j.Box,{mb:"5px",children:Object(S.jsx)(b.a,{text:B,iconName:x.z.FILTER,onClick:q})}),s&&Object(S.jsx)(R,{filterAction:a,initialValues:J,isHidden:!D,isLoading:F,location:m,FilterForm:s}),Object(S.jsxs)(j.Flex,{alignItems:"center",fontSize:"0px",children:[d&&!L&&Object(S.jsx)(j.Box,{mr:"20px",children:Object(S.jsx)(b.a,{text:"Add New",iconName:x.z.PLUS,onClick:V,disabled:F})}),_&&Object(S.jsx)(j.Box,{mr:"20px",children:Object(S.jsx)(b.a,{text:"Search",disabled:!Q||F,iconName:x.z.SEARCH,onClick:z})}),p&&Object(S.jsx)(j.Box,{mr:"20px",children:p}),C&&Object(S.jsx)(j.Box,{mr:"20px",children:Object(S.jsx)(b.j,{selectable:!1,isDisabled:!Q,dropdownListPosition:"center",ToggleButtonComponent:Object(S.jsx)(b.a,{text:"Download",iconName:x.z.DOWNLOAD,disabled:F}),children:Object(S.jsx)(b.k,{children:Object(S.jsx)(b.a,{text:".csv",iconName:x.z.FILE,onClick:function(){return v.d.downloadCSV(W,n)},classNames:["no-text-transform"],disabled:F})})})}),O&&Object(S.jsxs)(j.Flex,{alignItems:"flex-end",children:[Object(S.jsx)(b.h,{seconds:5}),Object(S.jsx)(j.Box,{ml:"4px",children:Object(S.jsx)(b.a,{text:"Stop Auto Refreshing",size:"11",iconName:x.z.STOP,onClick:f,disabled:F})})]})]}),Object(S.jsx)(j.Box,{mt:"5px",children:Object(S.jsx)(g,Object(c.a)({data:n,columns:i,filterable:U,isLoading:F},N))})]})})));t.a=Object(s.c)((function(e){return{isAutoRefresh:Object(p.isAutoRefreshSelector)(e),isOpenFilter:Object(p.isOpenFilterSelector)(e),isReadOnly:Object(p.isReadOnlySelector)(e),uiItems:Object(p.uiItemsSelector)(e)}}),(function(e){return Object(a.b)({stopAutoRefresh:p.stopAutoRefresh,resetUtils:p.resetUtils,setIsOpenFilter:p.setIsOpenFilter,setActivePagePermission:p.setActivePagePermission},e)}))(w)},1537:function(e,t,n){"use strict";n.r(t),n.d(t,"UsersActivity",(function(){return A})),n.d(t,"ApiCalls",(function(){return M})),n.d(t,"ScheduledJobs",(function(){return U})),n.d(t,"SystemMonitor",(function(){return ee})),n.d(t,"UiSessions",(function(){return ce}));var i,s,a,c,r,o=n(12),l=n(17),u=n(36),d=n(2),j=n.n(d),b=n(1171),m=n(1),x=n(0),O=[{maxWidth:100,Header:Object(x.jsx)(m.Q,{title:"ID"}),accessor:"id",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isNumber:!0})}},{maxWidth:200,Header:Object(x.jsx)(m.Q,{title:"User Name"}),accessor:"username",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value})}},{maxWidth:150,Header:Object(x.jsx)(m.Q,{title:"Event Date Time"}),accessor:"eventDatetime",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isDate:!0})}},{maxWidth:350,Header:Object(x.jsx)(m.Q,{title:"API Name"}),accessor:"apiName",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value})}},{Header:Object(x.jsx)(m.Q,{title:"Description"}),accessor:"description",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value})}}],f=n(611),h=n(3),p=n(599),v=n(5),S=n(4),g=function(e){var t=e.usersOptions,n=e.institutionsOptions,i=e.getUsers,s=e.currentInstitution,a=e.isLoadingUsers,c=e.isDisabled,r=s&&s.value;return j.a.useEffect((function(){r&&i(r)}),[i,r]),Object(x.jsxs)(j.a.Fragment,{children:[Object(x.jsx)(v.Box,{width:"300px",p:"8px",children:Object(x.jsx)(p.a,{id:"institutionId",name:"institutionId",component:m.I,label:"Institution",placeholder:"Select Institution",options:n,isClearable:!1,isDisabled:c,isRequired:!0,validate:[S.f.isRequired]})}),Object(x.jsx)(v.Box,{width:"300px",p:"8px",children:Object(x.jsx)(p.a,{id:"username",name:"username",component:m.I,label:"User Name",options:t,placeholder:"Select Username",isLoading:a,disabled:c})}),Object(x.jsx)(v.Box,{width:"180px",p:"8px",children:Object(x.jsx)(p.a,{id:"usersActivityDateTimeFrom",name:"usersActivityDateTimeFrom",component:m.y,label:"Date\xa0/\xa0Time From",placeholder:h.p.DATE_TIME,mask:h.F.DATE_TIME,disabled:c,isRequired:!0,validate:[S.f.isRequired,S.f.isDateTime]})}),Object(x.jsx)(v.Box,{width:"180px",p:"8px",children:Object(x.jsx)(p.a,{id:"usersActivityDateTimeTo",name:"usersActivityDateTimeTo",component:m.y,label:"Date\xa0/\xa0Time To",placeholder:h.p.DATE_TIME,mask:h.F.DATE_TIME,disabled:c,isRequired:!0,validate:[S.f.isRequired,S.f.isDateTime]})})]})},I=n(7),T=Object(f.a)(h.y.FILTER),D=Object(o.c)((function(e){return{isLoadingUsers:Object(I.isUsersActivityUsersLoadingSelector)(e),usersOptions:Object(I.usersActivityUsersSelector)(e),currentInstitution:T(e,"institutionId")}}),(function(e){return Object(l.b)({getUsers:I.handleGetUsersActivityUsers},e)}))(g),C=function(e){var t=e.institutionsOptions,n=e.usersActivity,i=e.filterUsersActivity,s=e.resetUsersActivity,a=e.isLoading,c=j.a.useState(null),r=Object(u.a)(c,2),o=r[0],l=r[1],d=j.a.useState(null),m=Object(u.a)(d,2),f=m[0],h=m[1];j.a.useEffect((function(){return l(S.c.yesterdayDateTime()),h(S.c.todayDateTime()),function(){return s()}}),[s]);var p=j.a.useMemo((function(){return{institutionId:t[0],usersActivityDateTimeFrom:o,usersActivityDateTimeTo:f}}),[t,o,f]);return Object(x.jsx)(b.a,{title:"User Activity",data:n,columns:O,isDownloadButton:!0,isLoading:a,filterAction:i,initialFilterValues:p,FilterForm:Object(x.jsx)(D,{isDisabled:a,institutionsOptions:t})})},A=Object(o.c)((function(e){return{isLoading:Object(I.isUsersActivityLoadingSelector)(e),institutionsOptions:Object(I.userInstitutionsOptionsSelector)(e),usersActivity:Object(I.usersActivitySelector)(e)}}),(function(e){return Object(l.b)({filterUsersActivity:I.handleFilterUsersActivity,resetUsersActivity:I.resetUsersActivity},e)}))(C),y=[{maxWidth:100,Header:Object(x.jsx)(m.Q,{title:"ID"}),accessor:"id",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isNumber:!0})}},{maxWidth:130,Header:Object(x.jsx)(m.Q,{title:"Institution"}),accessor:"institutionId",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value})}},{maxWidth:100,Header:Object(x.jsx)(m.Q,{title:"Endpoint ID"}),accessor:"endpointId",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isNumber:!0})}},{maxWidth:200,Header:Object(x.jsx)(m.Q,{title:"Endpoint Name"}),accessor:"endpointName",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value})}},{maxWidth:150,Header:Object(x.jsx)(m.Q,{title:"Event Date Time"}),accessor:"eventDatetime",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isDate:!0})}},{maxWidth:120,Header:Object(x.jsx)(m.Q,{title:"API Name"}),accessor:"apiName",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value})}},{Header:Object(x.jsx)(m.Q,{title:"Request Body"}),accessor:"requestBody",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isSmaller:!0})}},{Header:Object(x.jsx)(m.Q,{title:"Response Body"}),accessor:"responseBody",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isSmaller:!0})}}],L=n(601),F=function(e){var t=e.apiCalls,n=e.filterApiCalls,i=e.institutionsOptions,s=e.resetApiCalls,a=e.isLoading,c=j.a.useState(null),r=Object(u.a)(c,2),o=r[0],l=r[1],d=j.a.useState(null),m=Object(u.a)(d,2),O=m[0],f=m[1];j.a.useEffect((function(){return l(S.c.yesterdayDateTime()),f(S.c.todayDateTime()),function(){return s()}}),[s]);var p=j.a.useMemo((function(){return{institutionId:i[0],apiCallsDateTimeFrom:o,apiCallsDateTimeTo:O}}),[i,o,O]);return Object(x.jsx)(b.a,{title:"API Calls",data:t,columns:y,viewingModalName:h.G.API_CALL,filterAction:n,isDownloadButton:!0,isLoading:a,initialFilterValues:p,FilterForm:Object(x.jsx)(L.b,{isDisabled:a,institutionsOptions:i})})},M=Object(o.c)((function(e){return{isLoading:Object(I.isLoadingApiCallsSelector)(e),apiCalls:Object(I.apiCallsSelector)(e),institutionsOptions:Object(I.userInstitutionsOptionsSelector)(e)}}),(function(e){return Object(l.b)({filterApiCalls:I.handleFilterApiCalls,resetApiCalls:I.resetApiCalls},e)}))(F),N=function(e){var t=e.institutionsOptions,n=e.institutionValue,i=e.getSchedulerNames,s=e.schedulerNameOptions,a=e.isLoadingSchedulerNames,c=e.isDisabled,r=n&&n.value;return j.a.useEffect((function(){r&&i(r)}),[i,r]),Object(x.jsxs)(j.a.Fragment,{children:[Object(x.jsx)(v.Box,{width:"300px",p:"8px",children:Object(x.jsx)(p.a,{id:"institutionId",name:"institutionId",component:m.I,label:"Institution",placeholder:"Select Institution",options:t,isClearable:!1,isDisabled:c,isRequired:!0,validate:[S.f.isRequired]})}),Object(x.jsx)(v.Box,{width:"300px",p:"8px",children:Object(x.jsx)(p.a,{id:"scheduler",name:"scheduler",component:m.I,options:s,label:"Scheduler",placeholder:"Select Scheduler",isLoading:a,isDisabled:c})}),Object(x.jsx)(v.Box,{width:"180px",p:"8px",children:Object(x.jsx)(p.a,{id:"scheduledJobsDateTimeFrom",name:"scheduledJobsDateTimeFrom",component:m.y,label:"Date\xa0/\xa0Time From",placeholder:h.p.DATE_TIME,mask:h.F.DATE_TIME,disabled:c,isRequired:!0,validate:[S.f.isRequired,S.f.isDateTime]})}),Object(x.jsx)(v.Box,{width:"180px",p:"8px",children:Object(x.jsx)(p.a,{id:"scheduledJobsDateTimeTo",name:"scheduledJobsDateTimeTo",component:m.y,label:"Date\xa0/\xa0Time To",placeholder:h.p.DATE_TIME,mask:h.F.DATE_TIME,disabled:c,isRequired:!0,validate:[S.f.isRequired,S.f.isDateTime]})})]})},R=Object(f.a)(h.y.FILTER),E=Object(o.c)((function(e){return{isLoadingSchedulerNames:Object(I.isSchedulerJobNamesGettingSelector)(e),schedulerNameOptions:Object(I.instSchedulerNamesOptions)(e),institutionValue:R(e,"institutionId")}}),(function(e){return Object(l.b)({getSchedulerNames:I.handleGetSchedulerNamesByInstId},e)}))(N),w=[{maxWidth:100,Header:Object(x.jsx)(m.Q,{title:"ID"}),accessor:"id",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isNumber:!0})}},{maxWidth:200,Header:Object(x.jsx)(m.Q,{title:"Scheduler"}),accessor:"scheduler",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value})}},{maxWidth:150,Header:Object(x.jsx)(m.Q,{title:"Date\xa0/\xa0Time From"}),accessor:"dateTimeFrom",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isDate:!0})}},{maxWidth:150,Header:Object(x.jsx)(m.Q,{title:"Date\xa0/\xa0Time To"}),accessor:"dateTimeTo",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isDate:!0})}},{maxWidth:150,Header:Object(x.jsx)(m.Q,{title:"Execution Result"}),accessor:"executionResult",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value})}},{Header:Object(x.jsx)(m.Q,{title:"Error Description"}),accessor:"errorDescription",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value})}}],P=function(e){var t=e.institutionsOptions,n=e.scheduledJobs,i=e.filterScheduledJobs,s=e.resetScheduledJobs,a=e.getLogData,c=e.currentSchedulerId,r=e.currentScheduledJobName,o=e.isLoading,l=j.a.useState(null),d=Object(u.a)(l,2),m=d[0],O=d[1],f=j.a.useState(null),p=Object(u.a)(f,2),v=p[0],g=p[1];j.a.useEffect((function(){return O(S.c.yesterdayDateTime()),g(S.c.todayDateTime()),function(){return s()}}),[s]);var I=j.a.useMemo((function(){return[{name:"Show log",icon:h.z.SHORT_TEXT,action:function(){return a({id:c,name:h.Z.SCHEDULER_JOBS,title:r})}}]}),[a,c,r]);return Object(x.jsx)(b.a,{title:"Scheduled Jobs",data:n,columns:w,isDownloadButton:!0,isLoading:o,filterAction:i,contextMenuItems:I,initialFilterValues:{institutionId:t[0],scheduledJobsDateTimeFrom:m,scheduledJobsDateTimeTo:v},FilterForm:Object(x.jsx)(E,{isDisabled:o,institutionsOptions:t})})},U=Object(o.c)((function(e){return{isLoading:Object(I.isSysMonitorLoadingLogDataSelector)(e)||Object(I.isScheduledJobsLoadingSelector)(e),institutionsOptions:Object(I.userInstitutionsOptionsSelector)(e),scheduledJobs:Object(I.scheduledJobsSelector)(e),currentSchedulerId:Object(I.currentScheduledJobIdSelector)(e),currentScheduledJobName:Object(I.currentScheduledJobNameSelector)(e)}}),(function(e){return Object(l.b)({filterScheduledJobs:I.handleFilterScheduledJobs,getLogData:I.handleGetLogData,resetScheduledJobs:I.resetScheduledJobs},e)}))(P),H=n(57),k=n(18),B=n(11),W=Object(B.d)(m.d)(i||(i=Object(k.a)(["\n  cursor: pointer;\n  color: ",";\n  transition: all .1s linear;\n\n  ","\n\n  &:hover {\n    color: ",";\n  }\n"])),(function(e){return e.theme.colors.gray}),(function(e){return e.isOpen&&"\n    transform: rotate(-180deg);\n  "}),(function(e){return e.theme.colors.normalAccent})),Q=B.d.div(s||(s=Object(k.a)(["\n  .header {\n    z-index: 11;\n  }\n"]))),J=function(e){var t=e.children,n=e.header,i=e.additionalTool,s=j.a.useState(!0),a=Object(u.a)(s,2),c=a[0],r=a[1];return Object(x.jsxs)("div",{children:[Object(x.jsx)(Q,{children:Object(x.jsxs)(v.Flex,{justifyContent:"space-between",alignItems:"center",children:[n&&Object(x.jsx)("div",{className:"header",children:n}),Object(x.jsxs)(v.Flex,{alignItems:"flex-end",children:[i&&Object(x.jsx)(v.Box,{mb:"4px",children:i}),Object(x.jsx)(v.Box,{mb:"3px",children:Object(x.jsx)(W,{size:"24",className:"icon",isOpen:c,onClick:function(){return r(!c)}})})]})]})}),c&&Object(x.jsx)(j.a.Fragment,{children:t}),!c&&Object(x.jsx)(m.s,{noSpace:!0})]})},_=B.d.div(a||(a=Object(k.a)(["\n  position: relative;\n  margin-bottom: 30px;\n\n  .loading {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: ",";\n    color: ",";\n    font-weight: bold;\n    font-size: 10px;\n    letter-spacing: .5pt;\n    text-transform: uppercase;\n    z-index: 10;\n  }\n"])),(function(e){return e.theme.colors.white}),(function(e){return e.theme.colors.darkGray})),z=function(e){var t=e.children,n=e.isLoading;return Object(x.jsxs)(_,{children:[t,n&&Object(x.jsx)("div",{className:"loading",children:"Loading..."})]})},q=Object(B.d)(v.Flex)(c||(c=Object(k.a)(["\n  align-items: flex-start;\n  cursor: pointer;\n"]))),V=function(e){var t=e.value,n=e.onClick,i=j.a.useState(t),s=Object(u.a)(i,2),a=s[0],c=s[1],r=j.a.useCallback((function(){n(),c(!a)}),[a,n]);return Object(x.jsxs)(q,{onClick:r,children:[a?Object(x.jsx)(m.c,{}):Object(x.jsx)(m.V,{}),Object(x.jsx)(v.Box,{ml:"5px",mb:"3px",children:Object(x.jsx)(m.J,{children:"Refresh table"})})]})},G=function(e){var t=e.title,n=e.counts;return Object(x.jsxs)(v.Flex,{alignItems:"baseline",justifyContent:"space-between",children:[Object(x.jsx)(v.Box,{mr:"10px",children:Object(x.jsx)(m.N,{children:t})}),n&&Object(x.jsxs)(m.J,{children:[n.countActive," active, ",n.countFaulty," faulty"]})]})},Z=function(e,t){return[{maxWidth:130,Header:Object(x.jsx)(m.Q,{title:"Institution"}),accessor:"institutionName",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isSmaller:!0})}},{maxWidth:260,Header:Object(x.jsx)(m.Q,{title:"Name"}),accessor:"name",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isSmaller:!0})}},{maxWidth:100,Header:Object(x.jsx)(m.Q,{title:"Status"}),accessor:"status",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isSmaller:!0})}},{maxWidth:140,Header:Object(x.jsx)(m.Q,{title:"Last Message Date\xa0/\xa0Time"}),accessor:"lastMessageDatetime",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isDate:!0,isSmaller:!0})}},{maxWidth:140,Header:Object(x.jsx)(m.Q,{title:"Last Fault Date\xa0/\xa0Time"}),accessor:"lastFaultDatetime",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isDate:!0,isSmaller:!0})}},{maxWidth:85,accessor:"showLogButton",Cell:function(n){return Object(x.jsx)(v.Flex,{alignItems:"flex-start",p:"7px 5px",children:Object(x.jsx)(m.a,{text:"Show log",size:"10",classNames:["is-bordered"],onClick:function(){return e({name:t,id:n.original.id,title:n.original.name})}})})}}]},Y=function(e,t){return[{maxWidth:130,Header:Object(x.jsx)(m.Q,{title:"Institution"}),accessor:"institutionName",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isSmaller:!0})}},{maxWidth:300,Header:Object(x.jsx)(m.Q,{title:"Name"}),accessor:"name",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isSmaller:!0})}},{maxWidth:100,Header:Object(x.jsx)(m.Q,{title:"Status"}),accessor:"status",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isSmaller:!0})}},{maxWidth:85,accessor:"showLogButton",Cell:function(n){return Object(x.jsx)(v.Flex,{alignItems:"flex-start",p:"7px 5px",children:Object(x.jsx)(m.a,{text:"Show log",size:"10",classNames:["is-bordered"],onClick:function(){return e({name:t,id:n.original.id,title:n.original.name})}})})}}]},X=[{maxWidth:130,Header:Object(x.jsx)(m.Q,{title:"Institution"}),accessor:"institutionName",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isSmaller:!0})}},{maxWidth:140,Header:Object(x.jsx)(m.Q,{title:"Transaction Date\xa0/\xa0Time"}),accessor:"transactionDatetime",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isDate:!0,isSmaller:!0})}}],K=n(237),$=Object(m.Z)({isFixed:!0})((function(e){var t=e.getSysMonitorData,n=e.resetSysMonitor,i=e.interfacesData,s=e.endpointsData,a=e.schedulerData,c=e.lastTransactionsData,r=e.isLoadingInterfaces,o=e.isLoadingEndpoints,l=e.isLoadingScheduler,d=e.isLoadingLastTransactions,b=e.interfacesCounts,O=e.endpointsCounts,f=e.schedulerCounts,p=e.getLogData,g=j.a.useState([]),I=Object(u.a)(g,2),T=I[0],D=I[1],C=j.a.useState(!1),A=Object(u.a)(C,2),y=A[0],L=A[1],F="".concat(h.e).concat(h.fb.SYSTEM_MONITOR);j.a.useEffect((function(){return t(),function(){return n()}}),[t,n]),j.a.useEffect((function(){var e=[];for(var t in h.Z)S.b.get("".concat(F,"/").concat(h.Z[t]))&&e.push(h.Z[t]);D(e),e.length>0&&M()}),[F]);var M=function(){L(!1),setTimeout((function(){return L(!0)}),50)};j.a.useEffect((function(){var e=y&&setInterval((function(){t(T),M()}),6e4);return function(){return clearInterval(e)}}),[t,y,T]);var N=j.a.useCallback((function(e){T.find((function(t){return t===e}))?(D(T.filter((function(t){return t!==e}))),T.length<=1?L(!1):M()):(t([e]),D([].concat(Object(H.a)(T),[e])),M());var n="".concat(F,"/").concat(e);S.b.get(n)?S.b.remove(n):S.b.set(n,JSON.stringify(h.jb.YES),{expires:h.j.MONTH})}),[T,t,F]),R=j.a.useMemo((function(){return[[{id:1,name:h.Z.INTERFACES,title:"Interfaces",counts:b,isLoading:r,tableData:i,columns:Z(p,h.Z.INTERFACES)},{id:2,name:h.Z.LAST_TRANSACTIONS,title:"Last Transactions",isLoading:d,tableData:c,columns:X}],[{id:3,name:h.Z.ENDPOINTS,title:"Endpoints",counts:O,isLoading:o,tableData:s,columns:Z(p,h.Z.ENDPOINTS)},{id:4,name:h.Z.SCHEDULER_JOBS,title:"Scheduler Jobs",counts:f,isLoading:l,tableData:a,columns:Y(p,h.Z.SCHEDULER_JOBS)}]]}),[O,s,b,i,o,r,d,l,c,f,a,p]);return Object(x.jsxs)(j.a.Fragment,{children:[Object(x.jsxs)(v.Flex,{alignItems:"center",children:[Object(x.jsx)(K.a,{title:"System Monitor",pageId:h.fb.SYSTEM_MONITOR}),Object(x.jsx)(v.Box,{mb:"5px",ml:"12px",children:y&&Object(x.jsx)(m.h,{seconds:60})})]}),Object(x.jsx)(v.Box,{mx:"-20px",children:Object(x.jsx)(v.Flex,{flexWrap:"wrap",alignItems:"flex-start",children:R.map((function(e,t){return Object(x.jsx)(v.Box,{width:[.5],px:"20px",children:e.map((function(e){return Object(x.jsx)(z,{isLoading:e.isLoading,children:Object(x.jsx)(J,{header:Object(x.jsx)(G,{title:e.title,counts:e.counts}),additionalTool:Object(x.jsx)(V,{onClick:function(){return N(e.name)},value:!!S.b.get("".concat(F,"/").concat(e.name))}),children:Object(x.jsx)(m.O,{data:e.tableData||[],columns:e.columns,pageSize:4,isSmaller:!0})})},e.id)}))},t)}))})})]})})),ee=Object(o.c)((function(e){return{isLoading:Object(I.isSysMonitorLoadingLogDataSelector)(e),isLoadingInterfaces:Object(I.isSysMonitorInterfacesLoadingSelector)(e),isLoadingEndpoints:Object(I.isSysMonitorEndpointsLoadingSelector)(e),isLoadingScheduler:Object(I.isSysMonitorSchedulerLoadingSelector)(e),isLoadingLastTransactions:Object(I.isSysMonitorLastTransactionsLoadingSelector)(e),interfacesData:Object(I.sysMonitorInterfacesSelector)(e),endpointsData:Object(I.sysMonitorEndpointsSelector)(e),schedulerData:Object(I.sysMonitorSchedulerSelector)(e),lastTransactionsData:Object(I.sysMonitorLastTransactionsSelector)(e),interfacesCounts:Object(I.sysMonitorInterfacesCountsSelector)(e),endpointsCounts:Object(I.sysMonitorEndpointsCountsSelector)(e),schedulerCounts:Object(I.sysMonitorSchedulerCountsSelector)(e)}}),(function(e){return Object(l.b)({getSysMonitorData:I.handleGetSysMonitorData,getLogData:I.handleGetLogData,resetSysMonitor:I.resetSysMonitor},e)}))($),te=n(56),ne=[{maxWidth:150,Header:Object(x.jsx)(m.Q,{title:"Institution"}),accessor:"institutionName",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value})}},{maxWidth:150,Header:Object(x.jsx)(m.Q,{title:"Username"}),accessor:"username",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value})}},{maxWidth:180,Header:Object(x.jsx)(m.Q,{title:"First Name"}),accessor:"firstName",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value})}},{maxWidth:180,Header:Object(x.jsx)(m.Q,{title:"Last Name"}),accessor:"lastName",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value})}},{maxWidth:140,Header:Object(x.jsx)(m.Q,{title:"Last Date Time"}),accessor:"lastDatetime",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isDate:!0})}},{maxWidth:120,Header:Object(x.jsx)(m.Q,{title:"IP Address"}),accessor:"ipAddress",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value})}},{maxWidth:500,Header:Object(x.jsx)(m.Q,{title:"User Agent"}),accessor:"userAgent",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value,isSmaller:!0})}},{maxWidth:100,Header:Object(x.jsx)(m.Q,{title:"Status"}),accessor:"status",Cell:function(e){return Object(x.jsx)(m.P,{value:e.value})}}],ie=Object(B.d)(v.Box)(r||(r=Object(k.a)(["\n  max-width: 50%;\n  min-width: 300px;\n  padding: 8px;\n"]))),se=function(e){var t=e.institutionsOptions,n=e.isDisabled;return Object(x.jsx)(j.a.Fragment,{children:Object(x.jsx)(ie,{children:Object(x.jsx)(p.a,{id:"institutionId",name:"institutionId",component:m.I,label:"Institution",placeholder:"Select Institution",options:t,isMulti:!0,isDisabled:n,isRequired:!0,validate:[S.f.isRequired]})})})},ae=Object(te.g)((function(e){var t=e.institutionsOptions,n=e.uiSessions,i=e.filterUiSessions,s=e.filterUsersActivity,a=e.resetUiSessions,c=e.currentUserId,r=e.history,o=e.isLoading;j.a.useEffect((function(){return function(){return a()}}),[a]);var l=j.a.useMemo((function(){var e=n.find((function(e){return e.id===c}));return e?{username:{value:e.username,label:"".concat(e.firstName," ").concat(e.lastName)},institutionId:{value:e.institutionId,label:e.institutionName},usersActivityDateTimeFrom:S.c.yesterdayDateTime(),usersActivityDateTimeTo:S.c.todayDateTime()}:null}),[n,c]),u=j.a.useMemo((function(){var e=S.g.getUserData();return e&&e.username}),[]),d=j.a.useCallback((function(){var e="".concat(h.e).concat(h.fb.USERS_ACTIVITY);S.b.set("".concat(e,"-").concat(u),JSON.stringify(l),{expires:h.j.MONTH}),r.push(e),s(l)}),[r,l,s,u]),m=j.a.useMemo((function(){return[{name:"Show user activity",icon:h.z.SHORT_TEXT,action:d}]}),[d]),O=j.a.useMemo((function(){return{institutionId:[t[0]]}}),[t]);return Object(x.jsx)(j.a.Fragment,{children:Object(x.jsx)(b.a,{title:"UI Sessions",data:n,columns:ne,isDownloadButton:!0,filterAction:i,isSearchable:!0,isLoading:o,contextMenuItems:m,initialFilterValues:O,FilterForm:Object(x.jsx)(se,{isDisabled:o,institutionsOptions:t})})})})),ce=Object(o.c)((function(e){return{isLoading:Object(I.isUiSessionsLoadingSelector)(e),institutionsOptions:Object(I.userInstitutionsOptionsSelector)(e),uiSessions:Object(I.uiSessionsSelector)(e),currentUserId:Object(I.activeItemIdSelector)(e)}}),(function(e){return Object(l.b)({filterUiSessions:I.handleFilterUiSessions,filterUsersActivity:I.handleFilterUsersActivityByData,resetUiSessions:I.resetUiSessions},e)}))(ae)}}]);
//# sourceMappingURL=2.f421f58a.chunk.js.map