(this["webpackJsonpbox-ui"]=this["webpackJsonpbox-ui"]||[]).push([[7],{1171:function(e,t,n){"use strict";var i,c=n(12),a=n(17),o=n(10),r=n(43),s=n(54),l=n(2),u=n.n(l),d=n(57),b=n(5),f=n(1),O=n(22),j=n(3),m=n(47),x=n(170),p=n(359),h=n(7),g=n(4),I=n(0),S=function(e){var t=function(t){var n=t.activeTableRowIndex,i=t.contextMenuItems,c=void 0===i?[]:i,a=t.handleOpenModal,l=t.modalsStateList,d=(t.onRowClick,t.handleSetActiveItemId),b=t.handleSetActiveTableRowIndex,O=t.viewingModalName,h=Object(s.a)(t,["activeTableRowIndex","contextMenuItems","handleOpenModal","modalsStateList","onRowClick","handleSetActiveItemId","handleSetActiveTableRowIndex","viewingModalName"]),g=u.a.useState(null),S=Object(r.a)(g,2),R=S[0],v=S[1],A=u.a.useState(!1),T=Object(r.a)(A,2),w=T[0],F=T[1],C=u.a.useCallback((function(){F(!1),b(null),d(null)}),[b,d]);u.a.useEffect((function(){var e=p.a.find((function(e){return l["is".concat(e.name)]}));v(e)}),[l]),u.a.useEffect((function(){R||C()}),[R,C]);var M=u.a.useCallback((function(){return a({name:O})}),[a,O]),N=u.a.useCallback((function(e,t){t.withConfirmation?a({name:j.E.CONFIRMATION,payload:{confirmationAction:t.action,confirmationTitle:t.confirmationTitle,confirmationText:t.confirmationText}}):t.action()}),[a]),P=u.a.useMemo((function(){var e={name:"Open",icon:j.x.EDIT,action:function(){return M()}};return O?[e].concat(Object(m.a)(c)):c}),[c,O,M]),E=u.a.useCallback((function(e,t){var n=t.original.lockedFlag,i=t.original.id,c=t.index+1,a=t.page?c-t.pageSize*t.page:c;return{onDoubleClick:function(){O&&(d(i,n),b(a),M())},onContextMenu:function(){P.length&&(d(i,n),b(a),F(!0))},className:n&&"is-gray"}}),[M,O,P,d,b]);return Object(I.jsxs)(u.a.Fragment,{children:[Object(I.jsx)(x.b,{id:"tableContextMenu",disable:!P.length,children:Object(I.jsx)(e,Object(o.a)({onRowClick:E,activeTableRowIndex:n},h))}),Object(I.jsx)(f.g,{menuId:"tableContextMenu",onClick:N,items:P,isHidden:R||!w,onHide:!R&&n?C:null})]})};t.displayName="WithEditTable(".concat(g.a.getDisplayName(e),")");return Object(c.c)((function(e){return{activeTableRowIndex:Object(h.activeTableRowIndexSelector)(e),modalsStateList:Object(h.modalsStateListSelector)(e)}}),(function(e){return Object(a.b)({handleOpenModal:h.openModal,handleSetActiveItemId:h.setActiveItemId,handleSetActiveTableRowIndex:h.setActiveTableRowIndex},e)}))(t)}(Object(f.Z)()((function(e){var t=e.onRowClick,n=e.activeTableRowIndex,i=Object(s.a)(e,["onRowClick","activeTableRowIndex"]);return Object(I.jsx)(f.O,Object(o.a)({getTrGroupProps:t,activeRowIndex:n},i))}))),R=n(351),v=n(6),A=n.n(v),T=n(8),w=n(21),F=n(18),C=n(601),M=n(11).d.div(i||(i=Object(F.a)(["\n  margin-bottom: 15px;\n  padding: 10px 15px 12px;\n  border: 1px solid ",";\n  border-radius: 2px;\n  background-color: ",";\n\n  .title {\n    font-size: 18px;\n    color: ",";\n    font-weight: bold;\n  }\n\n  ",";\n"])),(function(e){return e.theme.colors.lighterGray}),(function(e){return e.theme.colors.lighterGrayCell}),(function(e){var t=e.theme;return e.color||t.colors.darkGray}),(function(e){return e.isHidden&&"\n    display: none;\n  "})),N=function(e){return e&&Object.keys(e).filter((function(e){return!e.match(/dateFrom|dateTo|dateTimeFrom|dateTimeTo/gi)})).reduce((function(t,n){return t[n]=e[n],t}),{})},P=Object(C.a)({form:j.w.FILTER,destroyOnUnmount:!1,enableReinitialize:!0})((function(e){var t=e.FilterForm,n=e.filterAction,i=e.filterValues,c=e.handleSubmit,a=e.isAutoRefresh,o=e.isHidden,r=e.isLoading,s=e.location,l=e.setIsAccessibleFiltering,d=e.stopAutoRefresh,O=u.a.useMemo((function(){var e=g.g.getUserData();return e&&e.username}),[]),m=u.a.useMemo((function(){return i&&Object.values(i).reduce((function(e,t){return t?++e:e}),0)}),[i]),x=u.a.useMemo((function(){var e,t=i&&i.institutionId,n=i&&i.transactionId,c=i&&i.accountId,a=i&&i.customerId,o=i&&i.cardId,r=i&&i.productName,l=i&&i.accountAlias,u=i&&i.panAlias,d=i&&i.lastName,b=(e={default:m>0},Object(w.a)(e,"".concat(j.d).concat(j.gb.SYSTEM_PROPERTIES),m>=0),Object(w.a)(e,"".concat(j.d).concat(j.gb.USERS),m>=0),Object(w.a)(e,"".concat(j.d).concat(j.gb.SCHEDULER),m>=0),Object(w.a)(e,"".concat(j.d).concat(j.gb.API_CALLS),m>1),Object(w.a)(e,"".concat(j.d).concat(j.gb.USERS_ACTIVITY),m>1),Object(w.a)(e,"".concat(j.d).concat(j.gb.ACCOUNTS),t&&(c||l||d)),Object(w.a)(e,"".concat(j.d).concat(j.gb.CARDS),t&&(c||o||a||u)),Object(w.a)(e,"".concat(j.d).concat(j.gb.STATEMENTS),t&&(c||l||d)),Object(w.a)(e,"".concat(j.d).concat(j.gb.CUSTOMERS),t&&(a||d)),Object(w.a)(e,"".concat(j.d).concat(j.gb.TRANSACTIONS),t&&(n||r||a||c)),e);return s.pathname in b?b[s.pathname]:b.default}),[m,i,s]);u.a.useEffect((function(){l(x)}),[x,l]);var p=u.a.useCallback(c(function(){var e=Object(T.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:a&&d(),g.b.set("".concat(s.pathname,"-").concat(O),JSON.stringify(N(t)),{expires:j.i.MONTH});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),[c,n,a,d]);return Object(I.jsxs)(M,{isHidden:o,children:[Object(I.jsx)("div",{className:"title",children:"Filter"}),Object(I.jsxs)("form",{onSubmit:p,children:[Object(I.jsx)(b.Flex,{width:"960px",alignItems:"flex-end",flexWrap:"wrap",m:"0 -8px 5px",children:t}),Object(I.jsx)(f.a,{text:"Show",isLoading:r,disabled:!x})]})]})})),E=Object(R.a)(j.w.FILTER),k=Object(c.c)((function(e){return{filterValues:E(e),isAutoRefresh:Object(h.isAutoRefreshSelector)(e)}}),(function(e){return Object(a.b)({stopAutoRefresh:h.stopAutoRefresh,setIsAccessibleFiltering:h.setIsAccessibleFiltering},e)}))(P),D=n(236),L=Object(O.b)(Object(d.g)((function(e){var t=e.title,n=e.data,i=e.columns,c=e.FilterForm,a=e.filterAction,l=e.openModal,d=e.newModalName,O=e.location,m=e.isAutoRefresh,x=e.stopAutoRefresh,p=e.resetUtils,h=e.AdditionalButton,R=e.initialFilterValues,v=(e.filterData,e.setIsOpenFilter),A=e.isOpenFilter,T=e.isDownloadButton,w=e.isSearchable,F=e.uiItems,C=e.isReadOnly,M=e.isLoading,N=e.setActivePagePermission,P=Object(s.a)(e,["title","data","columns","FilterForm","filterAction","openModal","newModalName","location","isAutoRefresh","stopAutoRefresh","resetUtils","AdditionalButton","initialFilterValues","filterData","setIsOpenFilter","isOpenFilter","isDownloadButton","isSearchable","uiItems","isReadOnly","isLoading","setActivePagePermission"]),E=u.a.useState(!1),L=Object(r.a)(E,2),y=L[0],U=L[1];u.a.useEffect((function(){var e=m&&setInterval((function(){return a()}),5e3);return function(){return clearInterval(e)}}),[m,a]);var B=u.a.useMemo((function(){return F.find((function(e){return"".concat(j.d).concat(e.id)==="".concat(O.pathname)}))}),[O,F]);u.a.useEffect((function(){var e=B&&B.permission;N(e)}),[N,F,O,B]),u.a.useEffect((function(){return function(){return p()}}),[p]);var H=u.a.useMemo((function(){return A?"Hide Filter":"Show Filter"}),[A]),V=u.a.useMemo((function(){return t.split(" ").join("_").toLowerCase()}),[t]),_=u.a.useMemo((function(){return n&&n.length}),[n]),z=u.a.useMemo((function(){var e=g.g.getUserData(),t=e&&e.username,n=g.b.get("".concat(O.pathname,"-").concat(t));return Object(o.a)(Object(o.a)({},R),n?JSON.parse(n):{})}),[R,O]),G=u.a.useMemo((function(){return w&&n&&n.length>10}),[w,n]),J=u.a.useCallback((function(){return U(!y)}),[y]),W=u.a.useCallback((function(){return v(!A)}),[v,A]),Y=u.a.useCallback((function(){return l({name:d})}),[l,d]);return Object(I.jsxs)(u.a.Fragment,{children:[Object(I.jsx)(D.a,{title:t,pageId:B&&B.id}),c&&Object(I.jsx)(b.Box,{mb:"5px",children:Object(I.jsx)(f.a,{text:H,iconName:j.x.FILTER,onClick:W})}),c&&Object(I.jsx)(k,{filterAction:a,initialValues:z,isHidden:!A,isLoading:M,location:O,FilterForm:c}),Object(I.jsxs)(b.Flex,{alignItems:"center",fontSize:"0px",children:[d&&!C&&Object(I.jsx)(b.Box,{mr:"20px",children:Object(I.jsx)(f.a,{text:"Add New",iconName:j.x.PLUS,onClick:Y,disabled:M})}),G&&Object(I.jsx)(b.Box,{mr:"20px",children:Object(I.jsx)(f.a,{text:"Search",disabled:!_||M,iconName:j.x.SEARCH,onClick:J})}),h&&Object(I.jsx)(b.Box,{mr:"20px",children:h}),T&&Object(I.jsx)(b.Box,{mr:"20px",children:Object(I.jsx)(f.j,{selectable:!1,isDisabled:!_,dropdownListPosition:"center",ToggleButtonComponent:Object(I.jsx)(f.a,{text:"Download",iconName:j.x.DOWNLOAD,disabled:M}),children:Object(I.jsx)(f.k,{children:Object(I.jsx)(f.a,{text:".csv",iconName:j.x.FILE,onClick:function(){return g.d.downloadCSV(V,n)},classNames:["no-text-transform"],disabled:M})})})}),m&&Object(I.jsxs)(b.Flex,{alignItems:"flex-end",children:[Object(I.jsx)(f.h,{seconds:5}),Object(I.jsx)(b.Box,{ml:"4px",children:Object(I.jsx)(f.a,{text:"Stop Auto Refreshing",size:"11",iconName:j.x.STOP,onClick:x,disabled:M})})]})]}),Object(I.jsx)(b.Box,{mt:"5px",children:Object(I.jsx)(S,Object(o.a)({data:n,columns:i,filterable:y,isLoading:M},P))})]})})));t.a=Object(c.c)((function(e){return{isAutoRefresh:Object(h.isAutoRefreshSelector)(e),isOpenFilter:Object(h.isOpenFilterSelector)(e),isReadOnly:Object(h.isReadOnlySelector)(e),uiItems:Object(h.uiItemsSelector)(e)}}),(function(e){return Object(a.b)({stopAutoRefresh:h.stopAutoRefresh,resetUtils:h.resetUtils,setIsOpenFilter:h.setIsOpenFilter,setActivePagePermission:h.setActivePagePermission},e)}))(L)},1539:function(e,t,n){"use strict";n.r(t),n.d(t,"Products",(function(){return O}));var i=n(12),c=n(17),a=n(2),o=n.n(a),r=n(3),s=n(1171),l=n(69),u=n(125),d=n(0),b=function(e){var t=e.productItems,n=e.institutionsOptions,i=e.filterProducts,c=e.currentProductName,a=e.deleteProduct,b=e.resetProducts,f=e.isLoading,O=e.isReadOnly;o.a.useEffect((function(){return function(){return b()}}),[b]);var j=o.a.useMemo((function(){return[{name:"Delete",icon:r.x.DELETE,isDisabled:O,action:a,withConfirmation:!0,confirmationText:'Delete product "'.concat(c,'"?')}]}),[a,c,O]),m=o.a.useMemo((function(){return{institutionId:n[0]}}),[n]);return Object(d.jsx)(s.a,{title:"Products",data:t,columns:l.m,isDownloadButton:!0,newModalName:r.E.ADD_PRODUCT,viewingModalName:r.E.EDIT_PRODUCT,contextMenuItems:j,filterAction:i,initialFilterValues:m,isLoading:f,FilterForm:Object(d.jsx)(u.j,{isDisabled:f,institutionsOptions:n})})},f=n(7),O=Object(i.c)((function(e){return{isLoading:Object(f.isProductsFilteringSelector)(e)||Object(f.isProductsDeletingSelector)(e),productItems:Object(f.productsSelector)(e),institutionsOptions:Object(f.userInstitutionsOptionsSelector)(e),currentProductName:Object(f.productNameSelector)(e),isReadOnly:Object(f.isReadOnlySelector)(e)}}),(function(e){return Object(c.b)({filterProducts:f.handleFilterProducts,deleteProduct:f.handleDeleteProduct,resetProducts:f.resetProducts},e)}))(b)}}]);
//# sourceMappingURL=7.a9a3a9db.chunk.js.map