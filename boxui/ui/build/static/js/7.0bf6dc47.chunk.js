(this["webpackJsonpbox-ui"]=this["webpackJsonpbox-ui"]||[]).push([[7],{1171:function(e,t,n){"use strict";var i,c=n(12),a=n(17),o=n(10),r=n(43),s=n(54),l=n(2),u=n.n(l),d=n(57),b=n(5),f=n(1),j=n(22),O=n(3),m=n(47),x=n(170),h=n(359),p=n(7),I=n(4),S=n(0),g=function(e){var t=function(t){var n=t.activeTableRowIndex,i=t.contextMenuItems,c=void 0===i?[]:i,a=t.handleOpenModal,l=t.modalsStateList,d=(t.onRowClick,t.handleSetActiveItemId),b=t.handleSetActiveTableRowIndex,j=t.viewingModalName,p=Object(s.a)(t,["activeTableRowIndex","contextMenuItems","handleOpenModal","modalsStateList","onRowClick","handleSetActiveItemId","handleSetActiveTableRowIndex","viewingModalName"]),I=u.a.useState(null),g=Object(r.a)(I,2),R=g[0],v=g[1],A=u.a.useState(!1),F=Object(r.a)(A,2),T=F[0],w=F[1],C=u.a.useCallback((function(){w(!1),b(null),d(null)}),[b,d]);u.a.useEffect((function(){var e=h.a.find((function(e){return l["is".concat(e.name)]}));v(e)}),[l]),u.a.useEffect((function(){R||C()}),[R,C]);var M=u.a.useCallback((function(){return a({name:j})}),[a,j]),N=u.a.useCallback((function(e,t){t.withConfirmation?a({name:O.F.CONFIRMATION,payload:{confirmationAction:t.action,confirmationTitle:t.confirmationTitle,confirmationText:t.confirmationText}}):t.action()}),[a]),P=u.a.useMemo((function(){var e={name:"Open",icon:O.y.EDIT,action:function(){return M()}};return j?[e].concat(Object(m.a)(c)):c}),[c,j,M]),k=u.a.useCallback((function(e,t){var n=t.original.lockedFlag,i=t.original.id,c=t.index+1,a=t.page?c-t.pageSize*t.page:c;return{onDoubleClick:function(){j&&(d(i,n),b(a),M())},onContextMenu:function(){P.length&&(d(i,n),b(a),w(!0))},className:n&&"is-gray"}}),[M,j,P,d,b]);return Object(S.jsxs)(u.a.Fragment,{children:[Object(S.jsx)(x.b,{id:"tableContextMenu",disable:!P.length,children:Object(S.jsx)(e,Object(o.a)({onRowClick:k,activeTableRowIndex:n},p))}),Object(S.jsx)(f.g,{menuId:"tableContextMenu",onClick:N,items:P,isHidden:R||!T,onHide:!R&&n?C:null})]})};t.displayName="WithEditTable(".concat(I.a.getDisplayName(e),")");return Object(c.c)((function(e){return{activeTableRowIndex:Object(p.activeTableRowIndexSelector)(e),modalsStateList:Object(p.modalsStateListSelector)(e)}}),(function(e){return Object(a.b)({handleOpenModal:p.openModal,handleSetActiveItemId:p.setActiveItemId,handleSetActiveTableRowIndex:p.setActiveTableRowIndex},e)}))(t)}(Object(f.ab)()((function(e){var t=e.onRowClick,n=e.activeTableRowIndex,i=Object(s.a)(e,["onRowClick","activeTableRowIndex"]);return Object(S.jsx)(f.P,Object(o.a)({getTrGroupProps:t,activeRowIndex:n},i))}))),R=n(351),v=n(6),A=n.n(v),F=n(8),T=n(21),w=n(18),C=n(601),M=n(11).d.div(i||(i=Object(w.a)(["\n  margin-bottom: 15px;\n  padding: 10px 15px 12px;\n  border: 1px solid ",";\n  border-radius: 2px;\n  background-color: ",";\n\n  .title {\n    font-size: 18px;\n    color: ",";\n    font-weight: bold;\n  }\n\n  ",";\n"])),(function(e){return e.theme.colors.lighterGray}),(function(e){return e.theme.colors.lighterGrayCell}),(function(e){var t=e.theme;return e.color||t.colors.darkGray}),(function(e){return e.isHidden&&"\n    display: none;\n  "})),N=function(e){return e&&Object.keys(e).filter((function(e){return!e.match(/dateFrom|dateTo|dateTimeFrom|dateTimeTo/gi)})).reduce((function(t,n){return t[n]=e[n],t}),{})},P=Object(C.a)({form:O.x.FILTER,destroyOnUnmount:!1,enableReinitialize:!0})((function(e){var t=e.FilterForm,n=e.filterAction,i=e.filterValues,c=e.handleSubmit,a=e.isAutoRefresh,o=e.isHidden,r=e.isLoading,s=e.location,l=e.setIsAccessibleFiltering,d=e.stopAutoRefresh,j=u.a.useMemo((function(){var e=I.g.getUserData();return e&&e.username}),[]),m=u.a.useMemo((function(){return i&&Object.values(i).reduce((function(e,t){return t?++e:e}),0)}),[i]),x=u.a.useMemo((function(){var e,t=i&&i.institutionId,n=i&&i.transactionId,c=i&&i.accountId,a=i&&i.customerId,o=i&&i.cardId,r=i&&i.productName,l=i&&i.accountAlias,u=i&&i.panAlias,d=i&&i.lastName,b=(e={default:m>0},Object(T.a)(e,"".concat(O.e).concat(O.hb.SYSTEM_PROPERTIES),m>=0),Object(T.a)(e,"".concat(O.e).concat(O.hb.USERS),m>=0),Object(T.a)(e,"".concat(O.e).concat(O.hb.SCHEDULER),m>=0),Object(T.a)(e,"".concat(O.e).concat(O.hb.API_CALLS),m>1),Object(T.a)(e,"".concat(O.e).concat(O.hb.USERS_ACTIVITY),m>1),Object(T.a)(e,"".concat(O.e).concat(O.hb.ACCOUNTS),t&&(c||l||d)),Object(T.a)(e,"".concat(O.e).concat(O.hb.CARDS),t&&(c||o||a||u)),Object(T.a)(e,"".concat(O.e).concat(O.hb.STATEMENTS),t&&(c||l||d)),Object(T.a)(e,"".concat(O.e).concat(O.hb.CUSTOMERS),t&&(a||d)),Object(T.a)(e,"".concat(O.e).concat(O.hb.TRANSACTIONS),t&&(n||r||a||c)),e);return s.pathname in b?b[s.pathname]:b.default}),[m,i,s]);u.a.useEffect((function(){l(x)}),[x,l]);var h=u.a.useCallback(c(function(){var e=Object(F.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:a&&d(),I.b.set("".concat(s.pathname,"-").concat(j),JSON.stringify(N(t)),{expires:O.j.MONTH});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),[c,n,a,d]);return Object(S.jsxs)(M,{isHidden:o,children:[Object(S.jsx)("div",{className:"title",children:"Filter"}),Object(S.jsxs)("form",{onSubmit:h,children:[Object(S.jsx)(b.Flex,{width:"960px",alignItems:"flex-end",flexWrap:"wrap",m:"0 -8px 5px",children:t}),Object(S.jsx)(f.a,{text:"Show",isLoading:r,disabled:!x})]})]})})),k=Object(R.a)(O.x.FILTER),D=Object(c.c)((function(e){return{filterValues:k(e),isAutoRefresh:Object(p.isAutoRefreshSelector)(e)}}),(function(e){return Object(a.b)({stopAutoRefresh:p.stopAutoRefresh,setIsAccessibleFiltering:p.setIsAccessibleFiltering},e)}))(P),E=n(236),y=Object(j.b)(Object(d.g)((function(e){var t=e.title,n=e.data,i=e.columns,c=e.FilterForm,a=e.filterAction,l=e.openModal,d=e.newModalName,j=e.location,m=e.isAutoRefresh,x=e.stopAutoRefresh,h=e.resetUtils,p=e.AdditionalButton,R=e.initialFilterValues,v=(e.filterData,e.setIsOpenFilter),A=e.isOpenFilter,F=e.isDownloadButton,T=e.isSearchable,w=e.uiItems,C=e.isReadOnly,M=e.isLoading,N=e.setActivePagePermission,P=Object(s.a)(e,["title","data","columns","FilterForm","filterAction","openModal","newModalName","location","isAutoRefresh","stopAutoRefresh","resetUtils","AdditionalButton","initialFilterValues","filterData","setIsOpenFilter","isOpenFilter","isDownloadButton","isSearchable","uiItems","isReadOnly","isLoading","setActivePagePermission"]),k=u.a.useState(!1),y=Object(r.a)(k,2),L=y[0],U=y[1];u.a.useEffect((function(){var e=m&&setInterval((function(){return a()}),5e3);return function(){return clearInterval(e)}}),[m,a]);var B=u.a.useMemo((function(){return w.find((function(e){return"".concat(O.e).concat(e.id)==="".concat(j.pathname)}))}),[j,w]);u.a.useEffect((function(){var e=B&&B.permission;N(e)}),[N,w,j,B]),u.a.useEffect((function(){return function(){return h()}}),[h]);var H=u.a.useMemo((function(){return A?"Hide Filter":"Show Filter"}),[A]),V=u.a.useMemo((function(){return t.split(" ").join("_").toLowerCase()}),[t]),_=u.a.useMemo((function(){return n&&n.length}),[n]),z=u.a.useMemo((function(){var e=I.g.getUserData(),t=e&&e.username,n=I.b.get("".concat(j.pathname,"-").concat(t));return Object(o.a)(Object(o.a)({},R),n?JSON.parse(n):{})}),[R,j]),G=u.a.useMemo((function(){return T&&n&&n.length>10}),[T,n]),J=u.a.useCallback((function(){return U(!L)}),[L]),W=u.a.useCallback((function(){return v(!A)}),[v,A]),Y=u.a.useCallback((function(){return l({name:d})}),[l,d]);return Object(S.jsxs)(u.a.Fragment,{children:[Object(S.jsx)(E.a,{title:t,pageId:B&&B.id}),c&&Object(S.jsx)(b.Box,{mb:"5px",children:Object(S.jsx)(f.a,{text:H,iconName:O.y.FILTER,onClick:W})}),c&&Object(S.jsx)(D,{filterAction:a,initialValues:z,isHidden:!A,isLoading:M,location:j,FilterForm:c}),Object(S.jsxs)(b.Flex,{alignItems:"center",fontSize:"0px",children:[d&&!C&&Object(S.jsx)(b.Box,{mr:"20px",children:Object(S.jsx)(f.a,{text:"Add New",iconName:O.y.PLUS,onClick:Y,disabled:M})}),G&&Object(S.jsx)(b.Box,{mr:"20px",children:Object(S.jsx)(f.a,{text:"Search",disabled:!_||M,iconName:O.y.SEARCH,onClick:J})}),p&&Object(S.jsx)(b.Box,{mr:"20px",children:p}),F&&Object(S.jsx)(b.Box,{mr:"20px",children:Object(S.jsx)(f.j,{selectable:!1,isDisabled:!_,dropdownListPosition:"center",ToggleButtonComponent:Object(S.jsx)(f.a,{text:"Download",iconName:O.y.DOWNLOAD,disabled:M}),children:Object(S.jsx)(f.k,{children:Object(S.jsx)(f.a,{text:".csv",iconName:O.y.FILE,onClick:function(){return I.d.downloadCSV(V,n)},classNames:["no-text-transform"],disabled:M})})})}),m&&Object(S.jsxs)(b.Flex,{alignItems:"flex-end",children:[Object(S.jsx)(f.h,{seconds:5}),Object(S.jsx)(b.Box,{ml:"4px",children:Object(S.jsx)(f.a,{text:"Stop Auto Refreshing",size:"11",iconName:O.y.STOP,onClick:x,disabled:M})})]})]}),Object(S.jsx)(b.Box,{mt:"5px",children:Object(S.jsx)(g,Object(o.a)({data:n,columns:i,filterable:L,isLoading:M},P))})]})})));t.a=Object(c.c)((function(e){return{isAutoRefresh:Object(p.isAutoRefreshSelector)(e),isOpenFilter:Object(p.isOpenFilterSelector)(e),isReadOnly:Object(p.isReadOnlySelector)(e),uiItems:Object(p.uiItemsSelector)(e)}}),(function(e){return Object(a.b)({stopAutoRefresh:p.stopAutoRefresh,resetUtils:p.resetUtils,setIsOpenFilter:p.setIsOpenFilter,setActivePagePermission:p.setActivePagePermission},e)}))(y)},1539:function(e,t,n){"use strict";n.r(t),n.d(t,"Products",(function(){return j}));var i=n(12),c=n(17),a=n(2),o=n.n(a),r=n(3),s=n(1171),l=n(69),u=n(125),d=n(0),b=function(e){var t=e.productItems,n=e.institutionsOptions,i=e.filterProducts,c=e.currentProductName,a=e.deleteProduct,b=e.resetProducts,f=e.isLoading,j=e.isReadOnly;o.a.useEffect((function(){return function(){return b()}}),[b]);var O=o.a.useMemo((function(){return[{name:"Delete",icon:r.y.DELETE,isDisabled:j,action:a,withConfirmation:!0,confirmationText:'Delete product "'.concat(c,'"?')}]}),[a,c,j]),m=o.a.useMemo((function(){return{institutionId:n[0]}}),[n]);return Object(d.jsx)(s.a,{title:"Products",data:t,columns:l.m,isDownloadButton:!0,newModalName:r.F.ADD_PRODUCT,viewingModalName:r.F.EDIT_PRODUCT,contextMenuItems:O,filterAction:i,initialFilterValues:m,isLoading:f,FilterForm:Object(d.jsx)(u.j,{isDisabled:f,institutionsOptions:n})})},f=n(7),j=Object(i.c)((function(e){return{isLoading:Object(f.isProductsFilteringSelector)(e)||Object(f.isProductsDeletingSelector)(e),productItems:Object(f.productsSelector)(e),institutionsOptions:Object(f.userInstitutionsOptionsSelector)(e),currentProductName:Object(f.productNameSelector)(e),isReadOnly:Object(f.isReadOnlySelector)(e)}}),(function(e){return Object(c.b)({filterProducts:f.handleFilterProducts,deleteProduct:f.handleDeleteProduct,resetProducts:f.resetProducts},e)}))(b)}}]);
//# sourceMappingURL=7.0bf6dc47.chunk.js.map